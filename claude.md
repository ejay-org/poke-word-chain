# Claude AI 작업 가이드

이 문서는 Claude AI가 포켓몬 음성 끝말잇기 프로젝트에서 작업할 때 참고해야 할 가이드입니다.

---

## 📚 프로젝트 문서 참조

### 기술 스택 및 프로젝트 개요
- **README.md**: 프로젝트의 핵심 기능, 기술 스택, 게임 규칙, 환경 설정 방법
- **requirements.md**: 상세 요구사항, 하이브리드 로직, 기능 명세

### 개발 워크플로우
- **roadmap.md**: Phase별 개발 단계, 우선순위, 주의사항
  - Phase 0-2: 프로젝트 초기화 및 로컬 게임 로직 구현
  - Phase 3: AI 페르소나 통합 (텍스트 기반 완성)
  - Phase 4-5: 음성 인식 및 출력 기능
  - Phase 6-7: UX 고도화 및 배포

---

## 🛠 기술 스택 요약

### Frontend
- **React.js** (Vite 번들러)
- **Tailwind CSS** (스타일링)

### AI & Audio APIs
- **STT (음성→텍스트)**: Groq API (Whisper-large-v3)
- **LLM (게임 로직 & 페르소나)**: Google Gemini API (Gemini 2.0 Flash)
- **TTS (텍스트→음성)**: Web Speech API (브라우저 내장)

### Data
- **pokemonData.json**: 1~9세대 한국어 포켓몬 이름 데이터

### Deployment
- **Vercel**: HTTPS 필수 (마이크 권한)

---

## 🎮 핵심 게임 로직

### 1. 하이브리드 처리 방식
1. **음성 인식** → 텍스트 변환 (Groq API)
2. **상태 판별** → "힌트 요청" vs "단어 입력" 구분
3. **팩트 체크 (로컬)** → pokemonData.json 기반 검증
   - 포켓몬 존재 여부
   - 끝말잇기 규칙 (마지막 글자 매칭)
   - 중복 사용 체크
   - 두음법칙 적용
4. **응답 생성 (LLM)** → 검증 결과 기반 페르소나 응답 생성
5. **음성 출력** → Web Speech API로 재생

### 2. 두음법칙 (중요!)
- **ㄹ → ㅇ**: '리' → '이' (예: 잠만보 → 보 → **이**상해씨)
- **ㄴ → ㅇ**: '뇨' → '요' (예: 냐오닉스 → 스 → **요**가램)
- **받침 처리**: '잠만보' → '보' 또는 '뽀' 가능

### 3. 힌트 시스템
- 트리거 키워드: "힌트", "힌트 줘", "모르겠어"
- 미사용 정답 후보 중 하나를 선정
- LLM이 자연스럽게 힌트 제공 (예: "ㅇㅇ로 시작하는 포켓몬은 어때?")

---

## 📋 개발 시 주의사항

### Phase별 작업 순서
1. **Phase 0-2 우선**: 로컬 로직과 UI 먼저 완성
2. **Phase 3에서 API 연동**: LLM 통합 후 텍스트 기반 게임 완전 동작 확인
3. **Phase 4-5는 부가 기능**: 음성 기능은 텍스트 게임 완성 후 추가

### 반복 튜닝이 필요한 부분
- **두음법칙 예외 케이스** (Step 9)
- **LLM 프롬프트 설계** (Step 16-17)
  - 게임 규칙 정확히 따르도록
  - 유효하지 않은 단어 선택 시 재시도 로직
  - 페르소나 톤앤매너 조정

### API 비용 절감
- 개발 초기에는 목업 응답으로 테스트
- 짧은 대화로만 실제 API 테스트
- Gemini 무료 할당량 활용

---

## 🎯 핵심 마일스톤

### ✅ Phase 3 완료 (Step 20)
**텍스트로 완전히 플레이 가능한 게임 완성**
- 사용자가 텍스트 입력
- AI가 LLM 페르소나로 응답
- 모든 게임 규칙 정상 작동

이 시점부터 음성 없이도 완전한 게임 플레이 가능합니다.

### ✅ Phase 5 완료 (Step 28)
**완전한 음성 대화 게임 완성**
- 음성 입력/출력 모두 지원
- 실시간 인터랙션

---

## 📝 코딩 컨벤션

### 폴더 구조 (예상)
```
src/
├── components/     # UI 컴포넌트
├── hooks/          # 커스텀 훅
├── utils/          # 유틸리티 함수 (검증 로직, 두음법칙)
├── data/           # pokemonData.json
├── services/       # API 연동 (Groq, Gemini)
└── context/        # 게임 상태 관리 (React Context)
```

### 주요 함수
- `validateWord()`: 포켓몬 존재 여부, 끝말잇기 규칙, 중복 체크
- `applyInitialSoundLaw()`: 한국어 두음법칙 처리
- `generateHint()`: 규칙에 맞는 미사용 단어 추출
- `detectIntent()`: "힌트 요청" vs "단어 입력" 판별

---

## 🚨 중요 포인트

1. **로컬 검증 우선**: API 호출 전에 반드시 pokemonData.json으로 1차 검증
2. **두음법칙 철저히**: 한국어 특성상 예외 케이스 많음
3. **LLM 프롬프트**: 게임 규칙을 명확히 전달하고, 응답에서 포켓몬 이름 추출 로직 필요
4. **HTTPS 필수**: 마이크 권한 때문에 배포 환경은 HTTPS 필수
5. **에러 핸들링**: 네트워크 오류, API 한도 초과, 마이크 권한 거부 등 처리

---

## 📖 추가 참고 자료

- **게임 규칙 상세**: README.md의 "게임 규칙" 섹션
- **기술 선정 이유**: requirements.md의 "기술 스택" 섹션
- **단계별 구현 순서**: roadmap.md의 Phase별 체크리스트
- **Phase별 완성 기준**: roadmap.md의 "Phase별 완성 기준" 섹션

---

이 문서의 내용이 불확실할 경우, 항상 원본 문서(README.md, requirements.md, roadmap.md)를 우선 참조하세요.
